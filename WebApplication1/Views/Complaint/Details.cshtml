@model SikayetAIWeb.Models.Complaint

@{
    ViewData["Title"] = "Şikayet Detayları";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    /*
         * ŞİKAYET DETAY SAYFASI İÇİN ÖZEL CSS STİLLERİ
         */
    body {
        background-color: #f4f7f6;
    }

    .complaint-container {
        max-width: 900px;
        margin: 2rem auto;
        padding: 2rem;
        background-color: #ffffff;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
    }

    .complaint-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 2px solid #e9ecef;
        padding-bottom: 1rem;
        margin-bottom: 2rem;
    }

        .complaint-header h2 {
            font-weight: 700;
            color: #343a40;
        }

    .status-badge {
        padding: 0.5rem 1.5rem;
        border-radius: 20px;
        font-weight: 600;
        text-transform: capitalize;
        font-size: 0.9rem;
        color: white;
    }

    .status-badge-pending {
        background-color: #ffc107;
    }

    .status-badge-in_progress {
        background-color: #007bff;
    }

    .status-badge-resolved {
        background-color: #28a745;
    }

    .status-badge-rejected {
        background-color: #dc3545;
    }

    .info-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
        margin-bottom: 2rem;
    }

    .info-item {
        background-color: #f8f9fa;
        padding: 1.5rem;
        border-radius: 8px;
    }

    .info-label {
        display: block;
        font-size: 0.85rem;
        font-weight: 600;
        color: #6c757d;
        margin-bottom: 0.5rem;
    }

    .info-value {
        font-size: 1rem;
        font-weight: 500;
        color: #495057;
        word-wrap: break-word;
    }

    .complaint-description {
        background-color: #f8f9fa;
        padding: 1.5rem;
        border-radius: 8px;
    }

    .reply-section {
        margin-top: 3rem;
        padding: 2rem;
        background-color: #d4edda;
        border-radius: 8px;
        border-left: 5px solid #28a745;
    }

        .reply-section .reply-header {
            font-size: 1.25rem;
            font-weight: 700;
            color: #155724;
            margin-bottom: 1rem;
        }

        .reply-section .reply-content {
            font-size: 1rem;
            line-height: 1.6;
            color: #155724;
        }

    .btn-back {
        margin-top: 2rem;
        background-color: #6c757d;
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        transition: background-color 0.2s ease;
    }

        .btn-back:hover {
            background-color: #5a6268;
        }
</style>

<div class="complaint-container">
    <div class="complaint-header">
        <h2>Şikayet Detayları</h2>
        @{
            string statusBadgeClass = Model.Status switch
            {
                ComplaintStatus.pending => "status-badge-pending",
                ComplaintStatus.in_progress => "status-badge-in_progress",
                ComplaintStatus.resolved => "status-badge-resolved",
                ComplaintStatus.rejected => "status-badge-rejected",
                _ => ""
            };
        }
        <span class="status-badge @statusBadgeClass">
            @Model.Status.ToString().Replace("_", " ")
        </span>
    </div>

    <div class="info-grid">
        <div class="info-item">
            <span class="info-label">Şikayet Başlığı</span>
            <span class="info-value">@Model.Title</span>
        </div>
        <div class="info-item">
            <span class="info-label">Kategori</span>
            <span class="info-value">@Model.Category @(string.IsNullOrEmpty(Model.Category2) ? "" : ", " + Model.Category2)</span>
        </div>
        <div class="info-item">
            <span class="info-label">Konum</span>
            <span class="info-value">@(Model.Location ?? "Belirtilmemiş")</span>
        </div>
        <div class="info-item">
            <span class="info-label">Gönderilme Tarihi</span>
            <span class="info-value">@Model.CreatedAt.ToString("g")</span>
        </div>
    </div>

    <div class="complaint-description mb-4">
        <span class="info-label">Açıklama</span>
        <span class="info-value">@Model.Description</span>
    </div>

    @if (!string.IsNullOrEmpty(Model.Reply))
    {
        <div class="reply-section">
            <p class="reply-header">Belediyenin Yanıtı</p>
            <p class="reply-content">@Model.Reply</p>
        </div>
    }

    <a asp-action="MyComplaints" class="btn btn-back">Şikayetlerime Geri Dön</a>
</div>
